create table film
(
    id     int auto_increment primary key,
    name   varchar(128) not null,
    length smallint     not null
);
create table seance
(
    id       int auto_increment primary key,
    film_id  int            not null,
    price    decimal(19, 2) not null,
    dt_start timestamp      not null,
    constraint seance_id_film_id foreign key (film_id) references film (id) on update cascade on delete cascade
);
create index seance_id_film_id_idx on seance (film_id);
create table ticket
(
    id        int auto_increment primary key,
    seance_id int not null,
    constraint ticket_id_seance_id foreign key (seance_id) references seance (id)
);

create index ticket_id_seance_id_idx on ticket (seance_id);


insert into film (name, length)
values ('back to future 1', 90),
       ('back to future 2', 120),
       ('back to future 3', 80),
       ('rocky 1', 60),
       ('rocky 2', 80),
       ('rocky 3', 90),
       ('rocky 4', 120),
       ('rocky 5', 70)
;


insert into seance (film_id, price, dt_start)
values (1, 200, '2021-11-20 09:00:00.000'),
       (2, 250, '2021-11-20 10:40:00.000'),
       (3, 300, '2021-11-20 12:00:00.000'),
       (4, 350, '2021-11-20 13:30:00.000'),
       (5, 400, '2021-11-20 14:20:00.000'),
       (6, 450, '2021-11-20 16:00:00.000'),
       (7, 500, '2021-11-20 16:40:00.000'),
       (8, 550, '2021-11-20 17:00:00.000'),
       (1, 600, '2021-11-20 18:30:00.000'),
       (2, 650, '2021-11-20 19:00:00.000'),
       (3, 700, '2021-11-20 20:00:00.000'),
       (4, 750, '2021-11-20 21:30:00.000'),
       (5, 800, '2021-11-20 22:20:00.000'),
       (6, 150, '2021-11-20 23:30:00.000'),
       (7, 100, '2021-11-20 05:00:00.000'),
       (8, 140, '2021-11-20 07:30:00.000');

insert into ticket (seance_id)
values (1),
       (1),
       (1),
       (1),
       (1),
       (2),
       (2),
       (2),
       (2),
       (2),
       (2),
       (2),
       (2),
       (2),
       (2),
       (2),
       (2),
       (3),
       (3),
       (3),
       (3),
       (3),
       (3),
       (3),
       (3),
       (3),
       (3),
       (3),
       (4),
       (4),
       (4),
       (4),
       (4),
       (4),
       (4),
       (4),
       (4),
       (4),
       (4),
       (4),
       (4),
       (4),
       (4),
       (5),
       (5),
       (5),
       (5),
       (5),
       (5),
       (5),
       (5),
       (5),
       (5),
       (5),
       (5),
       (5),
       (5),
       (5),
       (5),
       (6),
       (6),
       (6),
       (6),
       (6),
       (6),
       (6),
       (6),
       (6),
       (6),
       (6),
       (6),
       (6),
       (6),
       (6),
       (6),
       (6),
       (7),
       (7),
       (7),
       (7),
       (7),
       (7),
       (7),
       (8),
       (8),
       (8),
       (9),
       (9),
       (9),
       (9),
       (9),
       (9),
       (9),
       (9),
       (9),
       (9),
       (9),
       (9),
       (9),
       (9),
       (9),
       (9),
       (10),
       (10),
       (10),
       (10),
       (10),
       (10),
       (10),
       (10),
       (10),
       (10),
       (11),
       (11),
       (11),
       (11),
       (11),
       (11),
       (11),
       (11),
       (12),
       (12),
       (12),
       (12),
       (12),
       (12),
       (12),
       (12),
       (12),
       (12),
       (12),
       (13),
       (13),
       (13),
       (13),
       (13),
       (13),
       (13),
       (13),
       (13),
       (13),
       (13),
       (13),
       (13),
       (13),
       (13),
       (14),
       (14),
       (14),
       (14),
       (14),
       (14),
       (14),
       (14),
       (14),
       (14),
       (14),
       (14),
       (14),
       (14),
       (15),
       (15),
       (15),
       (15),
       (15),
       (15),
       (15),
       (15),
       (15),
       (15),
       (15),
       (15),
       (15),
       (15),
       (15),
       (15),
       (15),
       (15),
       (15),
       (15),
       (15),
       (15),
       (15),
       (15),
       (15);
